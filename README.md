# Project Overview

This project implements a full Service Request workflow on the Salesforce platform using Lightning Web Components (LWC), Apex services, SOQL-based data operations, and Agentforce AI Actions. The system allows agents to:

- Create new Service Requests
- View the five most recent requests
- Resolve Service Requests with generated resolution notes
- Optionally use Agentforce AI to auto-generate internal notes and automatically resolve the request

The solution is built to be scalable, testable, and aligned with Salesforce platform best practices.

![alt text](https://github.com/marlo321/techTaskProject/blob/main/images/img.png "Service Request Form logo")

## Lightning Web Component (LWC)

Component Name ```bash serviceRequestForm ```

Main Features:
- Form with fields (Customer Email, Description, Priority)
- List of last 5 Service Requests
- Form validation & error messaging

Highlights
- Uses data-name="email" | "description" | "priority" for DRY input handling

## Apex Service Layer

Main Apex Class ``` ServiceRequestController.cls ```

Exposed Methods:
- createServiceRequests(List<CreateRequestInput> inputs) -  create Service Requests by Email, Description and Priority
- resolveServiceRequests(List<ResolveRequestInput> inputs) - update Resolution Notes field by Service Request Id 
- getRecentServiceRequests() - return last 5 service request

## Agentforce Option B (Create an AI Action that enables an agent to resolve a request with AI-generated notes)

(Prompt Builder + Apex via ServiceRequestController)

This solution resolves a Service_Request__c record using two coordinated AI Actions:

1. AI Action (Prompt Builder):

Name: Generate_Service_Request_Resolution_Notes
Type: Flex

Inputs:
- ServiceRequest (Source Type should be an Object, then select Service Request object)

Output:
- resolutionNotes (String)

Prompt (summary):
As a support agent for Acme Service, your task is to generate clear, accurate internal resolution notes for the provided service request record.

Use the details below from the input record:
- Description: {!$Input:ServiceRequest.Description__c}
- Priority: {!$Input:ServiceRequest.Priority__c}
- Customer Email: {!$Input:ServiceRequest.Customer_Email__c}

Instructions:
Review the service request and write internal resolution notes that:
- summarize the issue,
- highlight important findings,
- describe completed or recommended troubleshooting steps
- clearly state the resolution or next action

Tone and style:
- Use straightforward, concise language in active voice.
- Avoid filler words, redundant phrases, or overly formal language.
- Do not attribute negative traits to the customer.
- Notes should be internal-facing only (not customer-facing).
- Do not generate an email or direct response.

Constraints:
- Do NOT invent product functionality, customer details, or unsupported actions.
- Only reference information that appears in the input record.
- Return ONLY the resolution notes as plain text. No labels, no headings, no JSON, no explanations.

Now generate the internal resolution notes for this service request.



Instruction to create Prompt Action:

Agent Action Instructions:

Use this action to generate internal resolution notes for a Service Request. The action analyzes the provided Service_Request__c record and produces clear, factual notes that summarize the issue, findings, and recommended or completed resolution steps.

ServiceRequest:
The complete Service_Request__c record used as input for generating the resolution notes. Provide the record currently being reviewed so the model can reference fields such as Description, Priority, and Customer Email when creating the notes.

Output Instructions:
The internal resolution notes generated by the prompt based on the provided Service Request record.

2. Apex AI Action

This AI Action does not generate text.
Instead, it uses the existing Apex logic in the assessment to safely update the record.

Name Resolve_Service_Request

Inputs:
- serviceRequestId (Id) 
Prompt Text: The Id of the Service_Request__c record that must be resolved.
Use the Id of the current Service Request in context so the Apex controller can update its status and save the resolution notes.

- resolutionNotes (Text)
Prompt Text: The final internal resolution notes that should be saved on the Service Request.
Use the plain-text notes generated by the “Generate_Service_Request_Resolution_Notes” AI Action, after the human agent has reviewed and edited them if needed.

Outputs:

A list containing the updated Service_Request__c records after the resolution process has completed.
Each record in this list reflects the final state of the service request, including updated fields such as Status__c and Resolution_Notes__c.
Use this output to confirm successful resolution and provide feedback to the human agent.

3. Flow AI Action

Create flow with Get Service Request

Agent Action Instructions:
Use this action to fetch a Service_Request__c record by Id so that you can use its fields in later actions, such as generating resolution notes.

recordId Instructions:
The Id of the Service_Request__c record to retrieve. Use the Id of the service request that the human agent is currently working on.

serviceRequest Instructions:
The Service_Request__c record retrieved from the database. Use this record as input to other actions, for example the Generate_Service_Request_Resolution_Notes Prompt Builder action or Resolve_Service_Request.


4. Agentforce Topic

Name: AI Resolution for Service Requests

The Topic guides the Agentforce Service Agent through the full workflow:

Classification Description:

This topic helps support agents resolve customer service requests by generating internal resolution notes and updating the request status to Resolved. Use this topic when an agent asks for help resolving a Service_Request__c, closing an issue, or producing resolution documentation. The topic classifies requests related to resolving, closing, or completing a service request.

Scope:

Your job is to assist the support agent in resolving a service request. You generate internal resolution notes using the Prompt Builder AI Action, present them to the human agent for approval, and then call the Apex AI Action to resolve the request using the provided notes. You must always involve the human agent before resolving the record and never create customer-facing messages.

Instructions:
```bash
1) Always begin by calling the Get_Service_Request agent action using the Id of the Service_Request__c that the human agent is working on. Require this field
2) Use the Service_Request__c record returned from Get_Service_Request_Record as input to the Generate_Service_Request_Resolution_Notes Prompt Builder agent action to create internal resolution notes.
3) Present the generated resolution notes to the human agent and allow them to edit or approve them. Do not proceed to resolve the request until the human agent confirms the final version of the notes.
4) After the human agent approves the notes, call the Resolve_Service_Request Apex agent action, passing the Service Request Id and the final resolution notes so the record can be updated and marked as Resolved.
5) Never resolve a service request without approved resolution notes, and never generate or send customer-facing messages in this topic. If important information is missing, ask the human agent for clarification instead of guessing.
```
Add Resolve_Service_Request and Generate_Service_Request_Resolution_Notes to the Topic


5. Agentforce

Add this topic to agentforce and test it